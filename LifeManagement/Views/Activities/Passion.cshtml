@using LifeManagement.Models
@model List<LifeManagement.Models.Activity>
    @{
        var common = new LifeManagement.Models.Common();
    }





<div id="passionerror" class="text-danger" style="display: none"><h4>Need to select two activities</h4></div>


<div class="clearfix">
    <h4 class="col-md-12 text-center" style="color:white">Select two activities you are passionate about</h4>
    <div class="col-md-12 text-center">
        @if (Model != null)
        {
            foreach (var a in Model)
            {

                <div class="cat-tiles col-sm-4 col-md-3">
                    <label id="lbl" for="@a.Id">
                        <div class="cat-tiles-body">

                            <img class="cat-tiles-img" src="@common.SignatureImageStr64(a.Img, a.ImgMime)" />
                        </div>
                    </label>
                    <div class="cat-tiles-specifics" id="spec-@a.Id">
                        <textarea placeholder="Specify activities" class="cat-tiles-spec-text" rows="1"></textarea>
                    </div>
                    <div class="cat-tiles-footer">
                        <input class="cat-tiles-chk chk-passion" type="checkbox" id="@a.Id" />
                        <label class="cat-tiles-lbl">@a.Name</label>
                    </div>


                </div>

            }
        }

    </div>

    <div class="col-md-12 text-right"><button class="btn btn-success" onclick="savePassion()">Save</button></div>
 
    </div>

<script>
    var passionlimit = 2;
    $('.chk-passion').on('change', function (evt) {
        var isInsert = this.checked;

        if (isInsert) {
            var l = $('.chk-passion:checkbox:checked').length;

            if (l >= passionlimit + 1) {
                this.checked = false;
                return;
            } else {

                $("#spec-" + this.id + " .cat-tiles-spec-text").css('background-color', 'aliceblue');
            }
        } else {

            $("#spec-" + this.id + " .cat-tiles-spec-text").css('background', 'white');
        }




    });
    function savePassion() {

        var l = $('.chk-passion:checkbox:checked').length;
        if (l != passionlimit) {
            $("#passionerror").show(200);
            return;
        } else {
            submitAll('passion');
           
            $("#basicModal").modal("hide");
        }

    }
</script>