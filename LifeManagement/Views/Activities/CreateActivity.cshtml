@model LifeManagement.Models.Activity



<div class="modal-body" style="width: 500px ; position: center ; margin:0 auto">

        <div class="form-horizontal">
            <h2 class="text-center"> Create Activity</h2>

            <br />

            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                <h5 id="EmptyName" class="col-md-offset-4 text-danger"></h5>
                @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-4" })
                <div class="col-md-8">
                    @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
                </div>
            </div>

            <br />

            <div class="form-group">
                <div class="control-label col-md-4">
                    <label> Choose a category</label>
                </div>
                <div class="col-md-8">
                    @Html.DropDownList("CategoryId", null, htmlAttributes: new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.CategoryId, "", new { @class = "text-danger" })
                </div>
            </div>


            <br />

            <div class="form-group">
                <h5 id="noFile" class="col-md-offset-4 text-danger"></h5>
                <div class="control-label col-md-4"> 
                    <label style="text-align:left">Upload Image:</label>
                </div>
                <div class="col-md-8">
                    <input type="file" name="file" id="file" style="width: 100%;" />
                </div>
            </div>


            <div class="form-group">
                <div class="col-md-offset-4">
                    <div class="col-md-4">
                        <button onclick="validate()" class="btn btn-success form-control">Create</button>
                       
                    </div>
                    <div class="col-md-4">
                        <button class="btn btn-danger" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>

        </div>
    </div>


<script src="~/Scripts/lmpopup.js"></script>

<script>
    function validate() {

        if ($("#Name").val() == "") {
            $("#EmptyName").html("Please enter a name for the activity");
            return;
        }

        if ($("#file").val() == "") {
            $("#noFile").html("Upload a file to continue");
            return;
        }

        if (($('#file')[0].files[0].size) >= 30000)       //30KB
        {
            $("#noFile").html("Image too big, please upload a pic of 30KB or less");
            return;
        }
        $.ajax({
            url: '@Url.Action("CreateActivity", "Activities")', 
            type: 'POST',
            data: { Name: $("#Name").val(), CategoryId: $("#CategoryId").val(), file: $("#file").val()},
            success: function (res) {
                alert("Todo cool");
            },
            error: function (msg) {
                alert("No cool :(");
            }
        });
    }
</script>


   